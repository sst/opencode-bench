generated_at: 2025-11-04T01:45:24.286Z
prompts:
  - commit: d7763789f262b2da228f8210509e302e6e510d0a
    prompt: "Add a metric to track Lambda batch item failures. When Lambda functions return a response containing batch item failures (the batchItemFailures field), emit a count of how many items failed as an enhanced metric. This should only happen when enhanced metrics are enabled and the response structure is valid (response is a dict and batchItemFailures is a list). The metric should be submitted asynchronously with enhanced metrics tags. Integrate this into the wrapper's after-execution hook so it automatically captures the response from any wrapped Lambda handler. Follow existing codebase patterns for function signatures and integration points. Include comprehensive test coverage for various scenarios: responses with multiple failures, empty failure lists, missing batchItemFailures field, None responses, invalid field types, and disabled enhanced metrics. Also add integration tests in the wrapper test suite to verify the metric submission is called with the correct response object."
